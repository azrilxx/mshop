(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{3534:function(e,s,t){Promise.resolve().then(t.bind(t,7667))},7667:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var l=t(7437),i=t(2265),r=t(6463),a=t(5800);function n(){let[e,s]=(0,i.useState)(null),[t,n]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0),o=(0,r.useRouter)();(0,i.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await (0,a.Hw)(["admin"]);s(e),await m()}catch(e){console.error("Auth check failed:",e),o.push("/login")}},m=async()=>{try{let e=await fetch("/api/admin/metrics"),s=await e.json();n(s.metrics)}catch(e){console.error("Failed to load metrics:",e)}finally{d(!1)}};if(c)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsx)("div",{className:"text-lg",children:"Loading..."})});if(!t)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsx)("div",{className:"text-lg text-red-600",children:"Failed to load metrics"})});let x=[{title:"Total Buyers",value:t.totalBuyers,color:"bg-blue-500"},{title:"Total Sellers",value:t.totalSellers,color:"bg-green-500"},{title:"Total Products",value:t.totalProducts,color:"bg-purple-500"},{title:"Total RFQs",value:t.totalRFQs,color:"bg-orange-500"},{title:"Verified Sellers",value:t.verifiedSellers,color:"bg-emerald-500"},{title:"Unverified Sellers",value:t.unverifiedSellers,color:"bg-yellow-500"},{title:"Pending Reports",value:t.pendingReports,color:"bg-red-500"},{title:"Suspended Users",value:t.suspendedUsers,color:"bg-gray-500"}];return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Platform Metrics"}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:"Overview of platform activity and governance"})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map((e,s)=>(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-3 rounded-lg ".concat(e.color," text-white"),children:(0,l.jsx)("div",{className:"text-2xl font-bold",children:e.value})}),(0,l.jsx)("div",{className:"ml-4",children:(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title})})]})},s))}),(0,l.jsxs)("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Seller Verification Status"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Verified Sellers"}),(0,l.jsx)("span",{className:"font-semibold text-green-600",children:t.verifiedSellers})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Pending Verification"}),(0,l.jsx)("span",{className:"font-semibold text-yellow-600",children:t.unverifiedSellers})]}),(0,l.jsx)("div",{className:"border-t pt-3",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"font-medium",children:"Verification Rate"}),(0,l.jsxs)("span",{className:"font-semibold",children:[t.totalSellers>0?Math.round(t.verifiedSellers/t.totalSellers*100):0,"%"]})]})})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Platform Health"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Active Products"}),(0,l.jsx)("span",{className:"font-semibold text-green-600",children:t.totalProducts})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Pending Reports"}),(0,l.jsx)("span",{className:"font-semibold text-red-600",children:t.pendingReports})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Suspended Users"}),(0,l.jsx)("span",{className:"font-semibold text-gray-600",children:t.suspendedUsers})]})]})]})]})]})})}},5800:function(e,s,t){"use strict";async function l(){try{let e=await fetch("/api/auth/session");if(!e.ok)return null;return await e.json()}catch(e){return null}}async function i(){let e=await l();if(!e)throw window.location.href="/login",Error("Authentication required");return e}async function r(e){let s=await i();if(!e.includes(s.user.role))throw window.location.href="/dashboard",Error("Insufficient permissions");return s}t.d(s,{Hw:function(){return r},Ss:function(){return l}})},6463:function(e,s,t){"use strict";var l=t(1169);t.o(l,"useRouter")&&t.d(s,{useRouter:function(){return l.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3534)}),_N_E=e.O()}]);