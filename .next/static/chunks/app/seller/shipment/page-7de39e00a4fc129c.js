(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{5921:function(e,s,t){Promise.resolve().then(t.bind(t,552)),Promise.resolve().then(t.bind(t,3450))},3450:function(e,s,t){"use strict";t.d(s,{default:function(){return r}});var l=t(7437),a=t(2265);function r(e){let{orders:s}=e,[t,r]=(0,a.useState)(s),[d,i]=(0,a.useState)(null),[n,c]=(0,a.useState)(""),u=async(e,s)=>{i(e),c("");try{let l=await fetch("/api/shipment",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e,shipmentStatus:s})}),a=await l.json();if(!l.ok)throw Error(a.error||"Failed to update shipment status");r(t.map(t=>t.id===e?{...t,shipmentStatus:s}:t))}catch(e){c(e.message)}finally{i(null)}},o=e=>e.shipmentStatus?e.shipmentStatus:e.status,x=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=[{value:"Order Processed",label:"Order Processed"},{value:"Packed",label:"Packed"},{value:"Shipped",label:"Shipped"},{value:"Out for Delivery",label:"Out for Delivery"},{value:"Delivered",label:"Delivered"},{value:"Delayed",label:"Delayed"},{value:"Returned",label:"Returned"}];return(0,l.jsxs)("div",{className:"space-y-6",children:[n&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,l.jsx)("div",{className:"text-red-700",children:n})}),0===t.length?(0,l.jsx)("div",{className:"text-center py-12",children:(0,l.jsx)("p",{className:"text-gray-500",children:"No orders found."})}):(0,l.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,l.jsx)("ul",{className:"divide-y divide-gray-200",children:t.map(e=>(0,l.jsx)("li",{className:"px-6 py-4",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Order #",e.id.slice(-8)]}),(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(x(o(e))),children:o(e)})]}),(0,l.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,l.jsxs)("p",{children:["Total: $",e.totalPrice.toFixed(2)]}),(0,l.jsxs)("p",{children:["Placed: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsxs)("select",{value:e.shipmentStatus||"",onChange:s=>u(e.id,s.target.value),disabled:d===e.id,className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Update Status"}),h.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]}),d===e.id&&(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Updating..."})]})]})]})})},e.id))})})]})}}},function(e){e.O(0,[388,552,971,23,744],function(){return e(e.s=5921)}),_N_E=e.O()}]);