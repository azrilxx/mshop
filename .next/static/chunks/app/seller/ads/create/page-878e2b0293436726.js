(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[142],{6026:function(e,s,t){Promise.resolve().then(t.bind(t,8060))},8060:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var r=t(7437),a=t(2265),l=t(6463),d=t(7138);function o(){let[e,s]=(0,a.useState)([]),[t,o]=(0,a.useState)(null),[n,i]=(0,a.useState)({productId:"",imageUrl:"",title:"",description:"",durationDays:7}),[c,u]=(0,a.useState)(!0),[m,x]=(0,a.useState)(!1),[h,b]=(0,a.useState)(""),p=(0,l.useRouter)();(0,a.useEffect)(()=>{f()},[]);let f=async()=>{try{let[e,t]=await Promise.all([fetch("/api/products?merchantId=current"),fetch("/api/plan")]);if(e.ok){let t=await e.json();s(t)}if(t.ok){let e=await t.json();o(e)}}catch(e){b(e.message)}finally{u(!1)}},g=async e=>{e.preventDefault(),x(!0),b("");try{let e=await fetch("/api/ads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to create ad");p.push("/seller/ads")}catch(e){b(e.message)}finally{x(!1)}},y=e=>{let{name:s,value:t}=e.target;i(e=>({...e,[s]:"durationDays"===s?parseInt(t):t}))};return c?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-gray-600",children:"Loading..."})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(d.default,{href:"/seller",className:"text-blue-600 hover:text-blue-800",children:"← Back to Seller Center"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Create Advertisement"}),t&&(0,r.jsxs)("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-900",children:"Ad Slot Usage"}),(0,r.jsxs)("p",{className:"text-blue-700",children:[t.adSlotsUsed,"/",t.maxAdSlots," slots used on ",t.tier," plan"]}),0===t.maxAdSlots&&(0,r.jsxs)("p",{className:"text-red-600 mt-2",children:["Your plan doesn't include ad slots. ",(0,r.jsx)(d.default,{href:"/seller/plan",className:"underline",children:"Upgrade now"})]})]}),(0,r.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,r.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,r.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"productId",className:"block text-sm font-medium text-gray-700",children:"Select Product"}),(0,r.jsxs)("select",{name:"productId",id:"productId",required:!0,value:n.productId,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Choose a product"}),e.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," - $",e.price]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Ad Title"}),(0,r.jsx)("input",{type:"text",name:"title",id:"title",required:!0,value:n.title,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Ad Description"}),(0,r.jsx)("textarea",{name:"description",id:"description",required:!0,rows:3,value:n.description,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700",children:"Banner Image URL"}),(0,r.jsx)("input",{type:"url",name:"imageUrl",id:"imageUrl",required:!0,value:n.imageUrl,onChange:y,placeholder:"https://example.com/banner.jpg",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"durationDays",className:"block text-sm font-medium text-gray-700",children:"Duration (Days)"}),(0,r.jsxs)("select",{name:"durationDays",id:"durationDays",value:n.durationDays,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:7,children:"7 days"}),(0,r.jsx)("option",{value:14,children:"14 days"}),(0,r.jsx)("option",{value:30,children:"30 days"})]})]}),h&&(0,r.jsx)("div",{className:"text-red-600 text-sm",children:h}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)(d.default,{href:"/seller",className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:m||!!t&&t.adSlotsUsed>=t.maxAdSlots,className:"bg-blue-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:m?"Creating...":"Create Ad"})]})]})})})]})})})}},6463:function(e,s,t){"use strict";var r=t(1169);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[388,971,23,744],function(){return e(e.s=6026)}),_N_E=e.O()}]);