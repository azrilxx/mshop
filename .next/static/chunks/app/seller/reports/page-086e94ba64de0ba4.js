(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[138],{1409:function(t,e,a){Promise.resolve().then(a.bind(a,4799)),Promise.resolve().then(a.bind(a,1426)),Promise.resolve().then(a.t.bind(a,231,23))},1426:function(t,e,a){"use strict";a.d(e,{getPlanAccess:function(){return l},yN:function(){return p},R9:function(){return m}});var r=a(2265);let s={Free:{maxProducts:5,maxAds:0,maxReports:0,hasAdvancedAnalytics:!1,hasPrioritySupport:!1,hasUnlimitedFeatures:!1},Standard:{maxProducts:30,maxAds:12,maxReports:30,hasAdvancedAnalytics:!0,hasPrioritySupport:!1,hasUnlimitedFeatures:!1},Premium:{maxProducts:-1,maxAds:-1,maxReports:-1,hasAdvancedAnalytics:!0,hasPrioritySupport:!0,hasUnlimitedFeatures:!0}};function n(t,e){let a=s[t];return -1===a.maxProducts||e<a.maxProducts}function i(t,e){let a=s[t];return -1===a.maxAds||e<a.maxAds}function o(t,e){let a=s[t];return -1===a.maxReports||e<a.maxReports}function u(t,e){let a=s[t];return -1===a.maxProducts?1/0:Math.max(0,a.maxProducts-e)}function d(t,e){let a=s[t];return -1===a.maxAds?1/0:Math.max(0,a.maxAds-e)}function c(t,e){let a=s[t];return -1===a.maxReports?1/0:Math.max(0,a.maxReports-e)}function m(){let[t,e]=(0,r.useState)(null),[a,s]=(0,r.useState)(null),[m,l]=(0,r.useState)(!0),[p,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{f()},[]);let f=async()=>{try{l(!0);let[t,a]=await Promise.all([fetch("/api/plan"),fetch("/api/plan/usage")]);if(!t.ok||!a.ok)throw Error("Failed to fetch plan data");let r=await t.json(),n=await a.json();e(r),s(n)}catch(t){h(t.message)}finally{l(!1)}},x=t&&a?{canCreateProducts:n(t.tier,a.productsCreated),canCreateAds:i(t.tier,a.adsCreated),canAccessReports:o(t.tier,a.reportsGenerated),canAccessMassShipment:"Standard"===t.tier||"Premium"===t.tier,canAccessPrioritySupport:"Premium"===t.tier,hasAdSlotsAvailable:i(t.tier,a.adsCreated),hasProductSlotsAvailable:n(t.tier,a.productsCreated),remainingProducts:u(t.tier,a.productsCreated),remainingAdSlots:d(t.tier,a.adsCreated),remainingReports:c(t.tier,a.reportsGenerated),upgradeMessage:"Free"===t.tier?"Upgrade to Standard for 30 products and 12 ads per month":"Standard"===t.tier?"Upgrade to Premium for unlimited products and ads":"You have unlimited access to all features"}:null;return{plan:t,usage:a,featureAccess:x,loading:m,error:p,refetch:f}}function l(t){let e=s[t];return{canCreateProducts:e=>n(t,e),getProductLimit:()=>e.maxProducts,getRemainingProducts:e=>u(t,e),canCreateAds:e=>i(t,e),getAdLimit:()=>e.maxAds,getRemainingAds:e=>d(t,e),canAccessReports:e=>o(t,e),getReportLimit:()=>e.maxReports,getRemainingReports:e=>c(t,e),hasFeature:a=>({shipment:"Standard"===t||"Premium"===t,analytics:e.hasAdvancedAnalytics,priority_support:e.hasPrioritySupport,ads:e.maxAds>0,reports:e.maxReports>0})[a]||!1,getPlanLimits:()=>e,isUnlimited:t=>-1===({products:e.maxProducts,ads:e.maxAds,reports:e.maxReports})[t]}}function p(t){let[e,a]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async function(){try{a(!0)}catch(t){a(!1)}finally{n(!1)}})()},[t]),{hasAccess:e,loading:s}}}},function(t){t.O(0,[231,799,971,23,744],function(){return t(t.s=1409)}),_N_E=t.O()}]);