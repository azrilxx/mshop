exports.id=577,exports.ids=[577],exports.modules={4697:(t,e,a)=>{Promise.resolve().then(a.bind(a,6361)),Promise.resolve().then(a.bind(a,3333)),Promise.resolve().then(a.t.bind(a,9404,23))},3333:(t,e,a)=>{"use strict";a.d(e,{default:()=>n});var r=a(326),i=a(7577),s=a(434);function n({product:t}){let[e,a]=(0,i.useState)(!1),[n,d]=(0,i.useState)(""),l=async()=>{a(!0),d("");try{let e=await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:t.id,quantity:1})}),a=await e.json();if(!e.ok)throw Error(a.error||"Failed to add to cart");d("Added to cart!"),setTimeout(()=>d(""),3e3)}catch(t){d(t.message)}finally{a(!1)}};return(0,r.jsxs)("div",{className:"card-modern card-hover-lift group",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(s.default,{href:`/product/${t.id}`,children:r.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-t-xl bg-gradient-to-br from-gray-50 to-gray-100",children:r.jsx("div",{className:"flex items-center justify-center h-64 group-hover:scale-105 transition-transform duration-300",children:r.jsx("svg",{className:"h-20 w-20 text-gray-300 group-hover:text-blue-400 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})})}),r.jsx("div",{className:"absolute top-3 left-3",children:r.jsx("span",{className:"category-pill-inactive text-xs px-2 py-1",children:t.category})})]}),(0,r.jsxs)("div",{className:"p-6",children:[r.jsx(s.default,{href:`/product/${t.id}`,children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 hover:text-blue-600 transition-colors duration-200 cursor-pointer group-hover:text-blue-600",children:t.name})}),r.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2 leading-relaxed",children:t.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[r.jsx("div",{className:"flex flex-col",children:(0,r.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["$",t.price.toFixed(2)]})}),r.jsx("button",{onClick:l,disabled:e,className:"btn-primary text-sm px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:e?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Adding..."})]}):"Add to Cart"})]}),n&&r.jsx("div",{className:`mt-3 text-sm font-medium ${n.includes("Added")?"text-green-600 bg-green-50 border border-green-200":"text-red-600 bg-red-50 border border-red-200"} px-3 py-2 rounded-lg`,children:n})]})]})}},4813:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});var r=a(9510),i=a(7371);function s({ad:t}){return(0,r.jsxs)("div",{className:"card-modern card-hover-lift group relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"aspect-w-16 aspect-h-9 overflow-hidden rounded-t-xl",children:r.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500"})}),r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("span",{className:"badge-premium text-xs font-medium shadow-lg",children:"⭐ Featured"})}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent rounded-t-xl"})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors duration-200 mb-2",children:t.title}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",children:t.description})]}),r.jsx("div",{className:"pt-4 border-t border-gray-100",children:(0,r.jsxs)(i.default,{href:`/product/${t.productId}`,className:"inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors duration-200",children:["View Product",r.jsx("svg",{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})]})}},4359:(t,e,a)=>{"use strict";a.d(e,{ZP:()=>d});var r=a(8570);let i=(0,r.createProxy)(String.raw`/home/runner/workspace/components/ProductCard.tsx`),{__esModule:s,$$typeof:n}=i;i.default;let d=(0,r.createProxy)(String.raw`/home/runner/workspace/components/ProductCard.tsx#default`)},9487:(t,e,a)=>{"use strict";a.d(e,{Kl:()=>h,SB:()=>g,Tb:()=>p,Up:()=>c,Yf:()=>w,Zd:()=>m,ir:()=>f,ut:()=>o,wQ:()=>u});var r=a(741),i=a.n(r),s=a(2023),n=a.n(s),d=a(9576);let l=new(i()),o={async create(t,e,a){if(await l.get(`user:${t}`))throw Error("User already exists");let r={id:(0,d.Z)(),email:t,passwordHash:await n().hash(e,10),role:a,is_verified:"admin"===a,createdAt:new Date().toISOString()};return await l.set(`user:${t}`,r),r},findByEmail:async t=>await l.get(`user:${t}`),async verifyPassword(t,e){let a=await this.findByEmail(t);return a&&await n().compare(e,a.passwordHash)?a:null},async updateVerificationStatus(t,e){let a=await this.findByEmail(t);a&&(a.is_verified=e,await l.set(`user:${t}`,a))},async getAll(){let t=await l.list("user:"),e=[];for(let a of t){let t=await l.get(a);t&&e.push(t)}return e},async findById(t){for(let e of(await l.list("user:"))){let a=await l.get(e);if(a&&a.id===t)return a}return null}},c={async create(t){let e={...t,id:(0,d.Z)(),createdAt:new Date().toISOString()};return await l.set(`product:${e.id}`,e),e},findById:async t=>await l.get(`product:${t}`),async findByMerchant(t){let e=await l.list("product:"),a=[];for(let r of e){let e=await l.get(r);e&&e.merchantId===t&&a.push(e)}return a},async getAll(){let t=await l.list("product:"),e=[];for(let a of t){let t=await l.get(a);if(t&&"active"===t.status){let a=await this.getMerchantById(t.merchantId);a&&a.is_verified&&e.push(t)}}return e},async getAllForPublic(){let t=await l.list("product:"),e=[];for(let a of t){let t=await l.get(a);if(t&&"active"===t.status){let a=await this.getMerchantById(t.merchantId);a&&a.is_verified&&e.push(t)}}return e},getMerchantById:async t=>await o.findById(t),async update(t,e){let a=await this.findById(t);if(!a)return null;let r={...a,...e};return await l.set(`product:${t}`,r),r}},u={async create(t){let e={...t,id:(0,d.Z)(),createdAt:new Date().toISOString()};return await l.set(`order:${e.id}`,e),e},findById:async t=>await l.get(`order:${t}`),async findByBuyer(t){let e=await l.list("order:"),a=[];for(let r of e){let e=await l.get(r);e&&e.buyerId===t&&a.push(e)}return a},async getAll(){let t=await l.list("order:"),e=[];for(let a of t){let t=await l.get(a);t&&e.push(t)}return e},async update(t,e){let a=await this.findById(t);if(!a)return null;let r={...a,...e};return await l.set(`order:${t}`,r),r},async findBySeller(t){let e=await l.list("order:"),a=[];for(let r of e){let e=await l.get(r);e&&(await Promise.all(e.productIds.map(t=>c.findById(t)))).some(e=>e&&e.merchantId===t)&&a.push(e)}return a}},m={get:async t=>await l.get(`cart:${t}`)||{items:[],updatedAt:new Date().toISOString()},async update(t,e){e.updatedAt=new Date().toISOString(),await l.set(`cart:${t}`,e)},async addItem(t,e,a=1){let r=await this.get(t),i=r.items.find(t=>t.productId===e);i?i.quantity+=a:r.items.push({productId:e,quantity:a}),await this.update(t,r)},async removeItem(t,e){let a=await this.get(t);a.items=a.items.filter(t=>t.productId!==e),await this.update(t,a)},async clear(t){await l.set(`cart:${t}`,{items:[],updatedAt:new Date().toISOString()})},async getAbandonedCarts(){let t=await l.list("cart:"),e=[],a=new Date(Date.now()-864e5);for(let r of t){let t=await l.get(r);if(t&&t.items.length>0&&!t.reminderSent&&new Date(t.updatedAt)<a){let a=r.replace("cart:","");e.push({userId:a,cart:t})}}return e}},w={async create(t,e="Free"){let a={userId:t,tier:e,...{Free:{maxProducts:20,maxAdSlots:0,customerSupport:!1},Standard:{maxProducts:60,maxAdSlots:12,customerSupport:!0},Premium:{maxProducts:-1,maxAdSlots:-1,customerSupport:!0}}[e],quotaUsed:0,adSlotsUsed:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await l.set(`plan:${t}`,a),a},async get(t){return await l.get(`plan:${t}`)||await this.create(t,"Free")},async update(t,e){let a={...await this.get(t),...e,updatedAt:new Date().toISOString()};return await l.set(`plan:${t}`,a),a},async incrementQuota(t){let e=await this.get(t);e.quotaUsed+=1,await this.update(t,{quotaUsed:e.quotaUsed})},async decrementQuota(t){let e=await this.get(t);e.quotaUsed>0&&(e.quotaUsed-=1,await this.update(t,{quotaUsed:e.quotaUsed}))}},p={async create(t){let e={...t,id:(0,d.Z)(),createdAt:new Date().toISOString()};return await l.set(`ad:${e.id}`,e),e},findById:async t=>await l.get(`ad:${t}`),async findBySeller(t){let e=await l.list("ad:"),a=[];for(let r of e){let e=await l.get(r);e&&e.sellerId===t&&a.push(e)}return a},async getActiveAds(){let t=await l.list("ad:"),e=[],a=new Date;for(let r of t){let t=await l.get(r);t&&"active"===t.status&&new Date(t.activeFrom)<=a&&new Date(t.activeUntil)>=a&&e.push(t)}return e},async update(t,e){let a=await this.findById(t);if(!a)return null;let r={...a,...e};return await l.set(`ad:${t}`,r),r}},g={async create(t){let e={...t,status:"pending",submittedAt:new Date().toISOString()};return await l.set(`verification:${t.userId}`,e),e},get:async t=>await l.get(`verification:${t}`),async update(t,e){let a=await this.get(t);if(!a)return null;let r={...a,...e};return e.status&&"pending"!==e.status&&(r.reviewedAt=new Date().toISOString()),await l.set(`verification:${t}`,r),r},async getAll(){let t=await l.list("verification:"),e=[];for(let a of t){let t=await l.get(a);t&&e.push(t)}return e}},h={async create(t){let e={...t,createdAt:new Date().toISOString()};return await l.set(`rating:${t.productId}:${t.userId}`,e),e},get:async(t,e)=>await l.get(`rating:${t}:${e}`),async getByProduct(t){let e=await l.list(`rating:${t}:`),a=[];for(let t of e){let e=await l.get(t);e&&a.push(e)}return a},async getAverageRating(t){let e=await this.getByProduct(t);return 0===e.length?{average:0,count:0}:{average:Number((e.reduce((t,e)=>t+e.rating,0)/e.length).toFixed(1)),count:e.length}}},f={async create(t){let e={...t,id:(0,d.Z)(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await l.set(`comment:${e.id}`,e),e},async getByProduct(t){let e=await l.list("comment:"),a=[];for(let r of e){let e=await l.get(r);e&&e.productId===t&&a.push(e)}return a.sort((t,e)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())},async getReplies(t){let e=await l.list("comment:"),a=[];for(let r of e){let e=await l.get(r);e&&e.parentId===t&&a.push(e)}return a.sort((t,e)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())},async update(t,e){let a=await l.get(`comment:${t}`);if(!a)return null;let r={...a,...e,updatedAt:new Date().toISOString()};return await l.set(`comment:${t}`,r),r},async delete(t){if(!await l.get(`comment:${t}`))return!1;for(let e of(await this.getReplies(t)))await l.delete(`comment:${e.id}`);return await l.delete(`comment:${t}`),!0}}},7371:(t,e,a)=>{"use strict";a.d(e,{default:()=>i.a});var r=a(1812),i=a.n(r)},1812:(t,e,a)=>{"use strict";let{createProxy:r}=a(8570);t.exports=r("/home/runner/workspace/node_modules/next/dist/client/link.js")}};