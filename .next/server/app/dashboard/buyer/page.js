(()=>{var e={};e.id=6521,e.ids=[6521],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13443:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>i}),t(51933),t(21450),t(35866);var r=t(23191),a=t(88716),l=t(37922),d=t.n(l),n=t(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let i=["",{children:["dashboard",{children:["buyer",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,51933)),"/home/runner/workspace/app/dashboard/buyer/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,21450)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/runner/workspace/app/dashboard/buyer/page.tsx"],x="/dashboard/buyer/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/buyer/page",pathname:"/dashboard/buyer",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},82166:(e,s,t)=>{Promise.resolve().then(t.bind(t,96783))},96783:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(10326),a=t(17577),l=t(35047),d=t(91666),n=t(73333);function o(){let[e,s]=(0,a.useState)(null),[t,o]=(0,a.useState)([]),[i,c]=(0,a.useState)([]),[x,m]=(0,a.useState)(!0),[u,h]=(0,a.useState)(""),[p,g]=(0,a.useState)("rfqs"),b=(0,l.useRouter)(),j=async e=>{try{(await fetch("/api/user/bookmarks",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e})})).ok&&c(s=>s.filter(s=>s.id!==e))}catch(e){console.error("Failed to remove bookmark:",e)}};return x?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(d.default,{user:e}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded"})]})]})})]}):u?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(d.default,{user:e}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[r.jsx("h3",{className:"text-red-800 font-medium",children:"Error"}),r.jsx("p",{className:"text-red-700 mt-1",children:u})]})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(d.default,{user:e}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Buyer Dashboard"}),(0,r.jsxs)("p",{className:"mt-2 text-gray-600",children:["Welcome back, ",e?.email,". Track your quote requests and saved products."]})]}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,r.jsxs)("button",{onClick:()=>g("rfqs"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"rfqs"===p?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Quote Requests (",t.length,")"]}),(0,r.jsxs)("button",{onClick:()=>g("bookmarks"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"bookmarks"===p?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Saved Products (",i.length,")"]})]})}),"rfqs"===p&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Your Quote Requests"}),0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No quote requests"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Start by browsing products and requesting quotes."}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:()=>b.push("/products"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Browse Products"})})]}):r.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:r.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(e=>r.jsx("li",{className:"px-6 py-4",children:r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-blue-600 truncate",children:["Product ID: ",e.productId]}),r.jsx("div",{className:"ml-2 flex-shrink-0 flex",children:r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:"Pending"})})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Quantity:"})," ",e.quantity]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Region:"})," ",e.region]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Submitted:"})," ",new Date(e.submittedAt).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"mt-2",children:[r.jsx("span",{className:"font-medium text-sm text-gray-600",children:"Message:"}),r.jsx("p",{className:"text-sm text-gray-900 mt-1",children:e.message})]})]})]})})},e.id))})})]}),"bookmarks"===p&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Saved Products"}),0===i.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No saved products"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Save products for later by clicking the bookmark icon on product cards."}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:()=>b.push("/products"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Browse Products"})})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>(0,r.jsxs)("div",{className:"relative",children:[r.jsx(n.default,{product:e}),r.jsx("button",{onClick:()=>j(e.id),className:"absolute top-2 right-2 p-1 bg-red-100 text-red-600 rounded-full hover:bg-red-200",title:"Remove bookmark",children:r.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},e.id))})]})]})]})}},73333:(e,s,t)=>{"use strict";t.d(s,{default:()=>d});var r=t(10326),a=t(17577),l=t(90434);function d({product:e}){let[s,t]=(0,a.useState)(null),[d,n]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),c=async t=>{if(t.preventDefault(),t.stopPropagation(),s&&"buyer"===s.role){i(!0);try{(await fetch("/api/user/bookmarks",{method:d?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.id})})).ok&&n(!d)}catch(e){console.error("Bookmark error:",e)}finally{i(!1)}}};return(0,r.jsxs)("div",{className:"relative",children:[r.jsx(l.default,{href:`/product/${e.id}`,children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[e.images&&e.images.length>0&&r.jsx("img",{src:e.images[0],alt:e.name,className:"w-full h-48 object-cover"}),(0,r.jsxs)("div",{className:"p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.name}),r.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:e.description}),e.tags&&e.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:e.tags.slice(0,3).map((e,s)=>r.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded",children:e},s))}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:["$",e.price.toLocaleString()]}),null!==e.stock&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.stock>0?`${e.stock} in stock`:"Out of stock"})]}),r.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700",children:"View Details"})]})]})]})}),s?.role==="buyer"&&r.jsx("button",{onClick:c,disabled:o,className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${d?"bg-blue-600 text-white":"bg-white text-gray-400 hover:text-gray-600"} shadow-md hover:shadow-lg disabled:opacity-50`,title:d?"Remove from saved":"Save for later",children:r.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})}},51933:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>d,__esModule:()=>l,default:()=>n});var r=t(68570);let a=(0,r.createProxy)(String.raw`/home/runner/workspace/app/dashboard/buyer/page.tsx`),{__esModule:l,$$typeof:d}=a;a.default;let n=(0,r.createProxy)(String.raw`/home/runner/workspace/app/dashboard/buyer/page.tsx#default`)},38238:(e,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"ReflectAdapter",{enumerable:!0,get:function(){return t}});class t{static get(e,s,t){let r=Reflect.get(e,s,t);return"function"==typeof r?r.bind(e):r}static set(e,s,t,r){return Reflect.set(e,s,t,r)}static has(e,s){return Reflect.has(e,s)}static deleteProperty(e,s){return Reflect.deleteProperty(e,s)}}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,6775,5516,1666],()=>t(13443));module.exports=r})();