(()=>{var e={};e.id=4142,e.ids=[4142],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},45807:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o}),r(4977),r(21450),r(35866);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),d=r(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(t,l);let o=["",{children:["seller",{children:["ads",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4977)),"/home/runner/workspace/app/seller/ads/create/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,21450)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/runner/workspace/app/seller/ads/create/page.tsx"],u="/seller/ads/create/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/seller/ads/create/page",pathname:"/seller/ads/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},20071:(e,t,r)=>{Promise.resolve().then(r.bind(r,933))},933:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(10326),a=r(17577),n=r(35047),i=r(90434),d=r(86709);function l({feature:e}){let{plan:t,usage:r,featureAccess:a,loading:n}=(0,d.R9)();if(n||!t||!r||!a)return null;let l=(()=>{switch(e){case"products":return{current:r.productsCreated,limit:"Premium"===t.tier?"∞":"Standard"===t.tier?"30":"5",remaining:a.remainingProducts,canUse:a.canCreateProducts};case"ads":return{current:r.adsCreated,limit:"Premium"===t.tier?"∞":"Standard"===t.tier?"12":"0",remaining:a.remainingAdSlots,canUse:a.canCreateAds};case"reports":return{current:r.reportsGenerated,limit:"Premium"===t.tier?"∞":"Standard"===t.tier?"30":"0",remaining:a.remainingReports,canUse:a.canAccessReports}}})(),o="number"==typeof l.remaining&&l.remaining<=.19999999999999996*parseInt(l.limit);return l.canUse&&!o?null:s.jsx("div",{className:`rounded-lg p-4 mb-6 ${l.canUse?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:`font-semibold ${l.canUse?"text-yellow-900":"text-red-900"}`,children:l.canUse?`${e.charAt(0).toUpperCase()+e.slice(1)} Usage Warning`:`${e.charAt(0).toUpperCase()+e.slice(1)} Limit Reached`}),s.jsx("p",{className:`text-sm ${l.canUse?"text-yellow-700":"text-red-700"}`,children:l.canUse?`You've used ${l.current}/${l.limit} ${e} this month (${l.remaining} remaining)`:`You've used ${l.current}/${l.limit} ${e} this month on your ${t.tier} plan`}),s.jsx("p",{className:`text-sm mt-1 ${l.canUse?"text-yellow-700":"text-red-700"}`,children:a.upgradeMessage})]}),s.jsx(i.default,{href:"/seller/plan",className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${l.canUse?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:"Premium"===t.tier?"Manage Plan":"Upgrade Plan"})]})})}function o(){let[e,t]=(0,a.useState)([]),[r,d]=(0,a.useState)(null),[o,c]=(0,a.useState)({productId:"",imageUrl:"",title:"",description:"",durationDays:7}),[u,m]=(0,a.useState)(!0),[p,x]=(0,a.useState)(!1),[h,g]=(0,a.useState)(""),b=(0,n.useRouter)(),f=async e=>{e.preventDefault(),x(!0),g("");try{let e=await fetch("/api/ads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to create ad");b.push("/seller/ads")}catch(e){g(e.message)}finally{x(!1)}},y=e=>{let{name:t,value:r}=e.target;c(e=>({...e,[t]:"durationDays"===t?parseInt(r):r}))};return u?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"text-gray-600",children:"Loading..."})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"max-w-2xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[s.jsx("div",{className:"mb-6",children:s.jsx(i.default,{href:"/seller/ads",className:"text-blue-600 hover:text-blue-800",children:"← Back to Ads"})}),s.jsx(l,{feature:"ads"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Create Advertisement"}),r&&(0,s.jsxs)("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-blue-900",children:"Ad Slot Usage"}),(0,s.jsxs)("p",{className:"text-blue-700",children:[r.adSlotsUsed,"/",r.maxAdSlots," slots used on ",r.tier," plan"]}),0===r.maxAdSlots&&(0,s.jsxs)("p",{className:"text-red-600 mt-2",children:["Your plan doesn't include ad slots. ",s.jsx(i.default,{href:"/seller/plan",className:"underline",children:"Upgrade now"})]})]}),s.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:s.jsx("div",{className:"px-4 py-5 sm:p-6",children:(0,s.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"productId",className:"block text-sm font-medium text-gray-700",children:"Select Product"}),(0,s.jsxs)("select",{name:"productId",id:"productId",required:!0,value:o.productId,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Choose a product"}),e.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," - $",e.price]},e.id))]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Ad Title"}),s.jsx("input",{type:"text",name:"title",id:"title",required:!0,value:o.title,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Ad Description"}),s.jsx("textarea",{name:"description",id:"description",required:!0,rows:3,value:o.description,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700",children:"Banner Image URL"}),s.jsx("input",{type:"url",name:"imageUrl",id:"imageUrl",required:!0,value:o.imageUrl,onChange:y,placeholder:"https://example.com/banner.jpg",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"durationDays",className:"block text-sm font-medium text-gray-700",children:"Duration (Days)"}),(0,s.jsxs)("select",{name:"durationDays",id:"durationDays",value:o.durationDays,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:7,children:"7 days"}),s.jsx("option",{value:14,children:"14 days"}),s.jsx("option",{value:30,children:"30 days"})]})]}),h&&s.jsx("div",{className:"text-red-600 text-sm",children:h}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[s.jsx(i.default,{href:"/seller",className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:p||!!r&&r.adSlotsUsed>=r.maxAdSlots,className:"bg-blue-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:p?"Creating...":"Create Ad"})]})]})})})]})})})}},86709:(e,t,r)=>{"use strict";r.d(t,{getPlanAccess:()=>m,yN:()=>p,R9:()=>u});var s=r(17577);let a={Free:{maxProducts:5,maxAds:0,maxReports:0,hasAdvancedAnalytics:!1,hasPrioritySupport:!1,hasUnlimitedFeatures:!1},Standard:{maxProducts:30,maxAds:12,maxReports:30,hasAdvancedAnalytics:!0,hasPrioritySupport:!1,hasUnlimitedFeatures:!1},Premium:{maxProducts:-1,maxAds:-1,maxReports:-1,hasAdvancedAnalytics:!0,hasPrioritySupport:!0,hasUnlimitedFeatures:!0}};function n(e,t){let r=a[e];return -1===r.maxProducts||t<r.maxProducts}function i(e,t){let r=a[e];return -1===r.maxAds||t<r.maxAds}function d(e,t){let r=a[e];return -1===r.maxReports||t<r.maxReports}function l(e,t){let r=a[e];return -1===r.maxProducts?1/0:Math.max(0,r.maxProducts-t)}function o(e,t){let r=a[e];return -1===r.maxAds?1/0:Math.max(0,r.maxAds-t)}function c(e,t){let r=a[e];return -1===r.maxReports?1/0:Math.max(0,r.maxReports-t)}function u(){let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0),[p,x]=(0,s.useState)(null),h=async()=>{try{m(!0);let[e,r]=await Promise.all([fetch("/api/plan"),fetch("/api/plan/usage")]);if(!e.ok||!r.ok)throw Error("Failed to fetch plan data");let s=await e.json(),n=await r.json();t(s),a(n)}catch(e){x(e.message)}finally{m(!1)}},g=e&&r?{canCreateProducts:n(e.tier,r.productsCreated),canCreateAds:i(e.tier,r.adsCreated),canAccessReports:d(e.tier,r.reportsGenerated),canAccessMassShipment:"Standard"===e.tier||"Premium"===e.tier,canAccessPrioritySupport:"Premium"===e.tier,hasAdSlotsAvailable:i(e.tier,r.adsCreated),hasProductSlotsAvailable:n(e.tier,r.productsCreated),remainingProducts:l(e.tier,r.productsCreated),remainingAdSlots:o(e.tier,r.adsCreated),remainingReports:c(e.tier,r.reportsGenerated),upgradeMessage:"Free"===e.tier?"Upgrade to Standard for 30 products and 12 ads per month":"Standard"===e.tier?"Upgrade to Premium for unlimited products and ads":"You have unlimited access to all features"}:null;return{plan:e,usage:r,featureAccess:g,loading:u,error:p,refetch:h}}function m(e){let t=a[e];return{canCreateProducts:t=>n(e,t),getProductLimit:()=>t.maxProducts,getRemainingProducts:t=>l(e,t),canCreateAds:t=>i(e,t),getAdLimit:()=>t.maxAds,getRemainingAds:t=>o(e,t),canAccessReports:t=>d(e,t),getReportLimit:()=>t.maxReports,getRemainingReports:t=>c(e,t),hasFeature:r=>({shipment:"Standard"===e||"Premium"===e,analytics:t.hasAdvancedAnalytics,priority_support:t.hasPrioritySupport,ads:t.maxAds>0,reports:t.maxReports>0})[r]||!1,getPlanLimits:()=>t,isUnlimited:e=>-1===({products:t.maxProducts,ads:t.maxAds,reports:t.maxReports})[e]}}function p(e){let[t,r]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!0);return{hasAccess:t,loading:a}}},35047:(e,t,r)=>{"use strict";var s=r(77389);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},4977:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>d});var s=r(68570);let a=(0,s.createProxy)(String.raw`/home/runner/workspace/app/seller/ads/create/page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let d=(0,s.createProxy)(String.raw`/home/runner/workspace/app/seller/ads/create/page.tsx#default`)},38238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let s=Reflect.get(e,t,r);return"function"==typeof s?s.bind(e):s}static set(e,t,r,s){return Reflect.set(e,t,r,s)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,6775,5516],()=>r(45807));module.exports=s})();