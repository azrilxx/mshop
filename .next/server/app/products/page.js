(()=>{var e={};e.id=5286,e.ids=[5286],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},73156:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(75252),r(21450),r(35866);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,75252)),"/home/runner/workspace/app/products/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,21450)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/runner/workspace/app/products/page.tsx"],u="/products/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/products/page",pathname:"/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},74697:(e,t,r)=>{Promise.resolve().then(r.bind(r,91666)),Promise.resolve().then(r.bind(r,73333)),Promise.resolve().then(r.t.bind(r,79404,23))},73333:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(10326),a=r(17577),n=r(90434);function i({product:e}){let[t,r]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),d=async r=>{if(r.preventDefault(),r.stopPropagation(),t&&"buyer"===t.role){c(!0);try{(await fetch("/api/user/bookmarks",{method:i?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.id})})).ok&&o(!i)}catch(e){console.error("Bookmark error:",e)}finally{c(!1)}}};return(0,s.jsxs)("div",{className:"relative",children:[s.jsx(n.default,{href:`/product/${e.id}`,children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[e.images&&e.images.length>0&&s.jsx("img",{src:e.images[0],alt:e.name,className:"w-full h-48 object-cover"}),(0,s.jsxs)("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.name}),s.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:e.description}),e.tags&&e.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:e.tags.slice(0,3).map((e,t)=>s.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded",children:e},t))}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:["$",e.price.toLocaleString()]}),null!==e.stock&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.stock>0?`${e.stock} in stock`:"Out of stock"})]}),s.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700",children:"View Details"})]})]})]})}),t?.role==="buyer"&&s.jsx("button",{onClick:d,disabled:l,className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${i?"bg-blue-600 text-white":"bg-white text-gray-400 hover:text-gray-600"} shadow-md hover:shadow-lg disabled:opacity-50`,title:i?"Remove from saved":"Save for later",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})}},75252:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(19510),a=r(90455),n=r(9487),i=r(16065),o=r(68570);let l=(0,o.createProxy)(String.raw`/home/runner/workspace/components/ProductCard.tsx`),{__esModule:c,$$typeof:d}=l;l.default;let u=(0,o.createProxy)(String.raw`/home/runner/workspace/components/ProductCard.tsx#default`);var x=r(57371);function p({ad:e}){return(0,s.jsxs)("div",{className:"card-modern card-hover-lift group relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"aspect-w-16 aspect-h-9 overflow-hidden rounded-t-xl",children:s.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500"})}),s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx("span",{className:"badge-premium text-xs font-medium shadow-lg",children:"â­ Featured"})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent rounded-t-xl"})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors duration-200 mb-2",children:e.title}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",children:e.description})]}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:(0,s.jsxs)(x.default,{href:`/product/${e.productId}`,className:"inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors duration-200",children:["View Product",s.jsx("svg",{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})]})}async function m(){let e=await (0,a.Gg)(),t=await n.productDb.getAllForPublic(),r=await n.adDb.getActiveAds();return(0,s.jsxs)("div",{children:[s.jsx(i.ZP,{user:e?.user||null}),s.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Products"}),r.length>0&&(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Featured Advertisements"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.slice(0,3).map(e=>s.jsx(p,{ad:e},e.id))})]}),0===t.length?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500",children:"No products available yet."})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>s.jsx(u,{product:e},e.id))})]})})]})}},16065:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>o});var s=r(68570);let a=(0,s.createProxy)(String.raw`/home/runner/workspace/components/Navbar.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let o=(0,s.createProxy)(String.raw`/home/runner/workspace/components/Navbar.tsx#default`)},90455:(e,t,r)=>{"use strict";r.d(t,{Gg:()=>n,MH:()=>l,PR:()=>c,SO:()=>i,ed:()=>a,mk:()=>o});var s=r(71615);async function a(e){let t={user:e,expires:new Date(Date.now()+6048e5).toISOString()};(0,s.cookies)().set("session",JSON.stringify(t),{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:604800})}async function n(){let e=(0,s.cookies)().get("session");if(!e)return null;try{let t=JSON.parse(e.value);if(new Date(t.expires)<new Date)return await i(),null;return t}catch{return null}}async function i(){(0,s.cookies)().delete("session")}async function o(){let e=await n();if(!e)throw Error("Authentication required");return e.user}async function l(e){let t=await o();if(!e.includes(t.role))throw Error("Insufficient permissions");return t}async function c(){let e=await n();return e?.user||null}},57371:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(670),a=r.n(s)},670:(e,t,r)=>{"use strict";let{createProxy:s}=r(68570);e.exports=s("/home/runner/workspace/node_modules/next/dist/client/link.js")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,741,1615,2964,6775,9487,5516,1666],()=>r(73156));module.exports=s})();